<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Wedding Album - Page 1 Collage</title>
  <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      background: url('https://res.cloudinary.com/dbpxjgghy/image/upload/v1750951549/ChatGPT_Image_Jun_26_2025_06_25_19_PM_ftofut.png') no-repeat center center fixed;
      background-size: cover;
    }

    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 6vh 0;
      box-sizing: border-box;
    }

    .image-wrapper {
      position: relative;
      left: var(--zigzag, 0);
      transform: rotate(calc(-6deg + 12deg * var(--rand, 0)));
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border-radius: 8px;
      background-color: white;
      padding: 1vh 1.5vw 2.5vh 1.5vw;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .image-wrapper:nth-child(1) { --zigzag: -16vw; }
    .image-wrapper:nth-child(2) { --zigzag: 16vw; }
    .image-wrapper:nth-child(3) { --zigzag: -16vw; }
    .image-wrapper:nth-child(4) { --zigzag: 16vw; }

    .image-wrapper:not(:first-child) { margin-top: -4vh; }

    .image-wrapper:only-child {
      align-self: center;
      margin: 0 auto;
      --zigzag: 0;
    }

    .image-wrapper:hover {
      transform: scale(1.03) rotate(calc(-6deg + 12deg * var(--rand, 0)));
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    .image-wrapper img {
      width: auto;
      height: auto;
      max-width: 90vw;
      object-fit: contain;
      display: block;
      border-radius: 8px;
    }

    .image-wrapper::before {
      content: '';
      position: absolute;
      top: -4vh;
      left: 50%;
      transform: translateX(-50%) rotate(0deg);
      width: 25vw;
      height: 8vh;
      background: url('https://res.cloudinary.com/dbpxjgghy/image/upload/v1750494001/ChatGPT_Image_Jun_21_2025_11_19_20_AM_vdpmdt.png') no-repeat center center / contain;
      z-index: 10;
    }

    #wrapper2::before {
      top: -2vh;
      left: 10%;
      transform: translateX(-50%) rotate(-35deg);
    }

    #wrapper4::before {
      top: -2vh;
      left: 90%;
      transform: translateX(-50%) rotate(35deg);
    }

    .one-image .image-wrapper img { height: 45vh; }
    .two-images .image-wrapper img { height: 22vh; }
    .three-images .image-wrapper img { height: 18vh; }
    .four-images .image-wrapper img { height: 21vh; }

    @media (max-height: 900px) {
      .one-image .image-wrapper img { height: 40vh; }
      .two-images .image-wrapper img { height: 22vh; }
      .three-images .image-wrapper img { height: 16vh; }
      .four-images .image-wrapper img { height: 19vh; }
    }

    @media (max-height: 700px) {
      .one-image .image-wrapper img { height: 35vh; }
      .two-images .image-wrapper img { height: 18vh; }
      .three-images .image-wrapper img { height: 14vh; }
      .four-images .image-wrapper img { height: 17vh; }
    }

    .global-blessing {
      position: absolute;
      top: 4vh;
      left: 50%;
      transform: translateX(-50%) rotate(-5deg);
      color: #5A3921;
      font-family: 'Varela Round', sans-serif !important;
      font-size: 2.2vh;
      padding: 1vh 2vw;
      z-index: 999;
      max-width: 90vw;
      text-align: center;
      display: none;
      text-shadow:
  -0.2px -0.2px 0 white,
   0.2px -0.2px 0 white,
  -0.2px  0.2px 0 white,
   0.2px  0.2px 0 white;

    }

    .blessing2, .blessing3, .blessing4 {
      position: absolute;
      top: 0;
      height: 100%;
      width: 45%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Varela Round', sans-serif;
      font-size: 2vh;
      color: #5A3921;
      text-shadow:
        -1px -1px 0 white,
         1px -1px 0 white,
        -1px  1px 0 white,
         1px  1px 0 white;
      padding: 1vh;
      text-align: center;
      background: none;
      pointer-events: none;
    }

    .blessing2 { left: -48%; }
    .blessing3 { right: -48%; }
    .blessing4 { left: -48%; }

  </style>
</head>

<body>

  <div class="global-blessing" id="globalBlessing"></div>

  <div class="container" id="imageContainer">
    <div class="image-wrapper" id="wrapper1" style="--rand: 0.1"><img id="img1"></div>
    <div class="image-wrapper" id="wrapper2" style="--rand: 0.7">
      <img id="img2">
      <div class="blessing2"></div>
    </div>
    <div class="image-wrapper" id="wrapper3" style="--rand: 0.3">
      <img id="img3">
      <div class="blessing3"></div>
    </div>
    <div class="image-wrapper" id="wrapper4" style="--rand: 0.9">
      <img id="img4">
      <div class="blessing4"></div>
    </div>
  </div>

<script>
  window.addEventListener('message', (event) => {
    const urls = event.data.images;
    const iframeId = event.data.iframeId;
    const container = document.getElementById('imageContainer');

    console.log("📥 Received images:", urls);

    urls.forEach((imgObj, i) => {
      const img = document.getElementById(`img${i + 1}`);
      const blessingEl = document.querySelector(`.blessing${i + 1}`);
      if (img && imgObj.url) {
        img.src = imgObj.url;
        console.log(`✅ Set img${i + 1} src to`, imgObj.url);
      }

      if (i === 0 && imgObj.blessing) {
        const globalBlessing = document.getElementById('globalBlessing');
        globalBlessing.textContent = imgObj.blessing;
        globalBlessing.style.display = 'block';
        console.log("🌸 Global blessing shown:", imgObj.blessing);
      }

      if (i > 0 && blessingEl && imgObj.blessing && imgObj.blessing.trim() !== '') {
        blessingEl.textContent = imgObj.blessing;
        console.log(`🌼 Blessing${i + 1} set to:`, imgObj.blessing);
      }
    });

    for (let i = urls.length; i < 4; i++) {
      const wrapper = document.getElementById(`wrapper${i + 1}`);
      if (wrapper) {
        wrapper.style.display = 'none';
        console.log(`❌ Hiding wrapper${i + 1}`);
      }
    }

    if (urls.length === 1) {
      container.className = 'container one-image';
    } else if (urls.length === 2) {
      container.className = 'container two-images';
    } else if (urls.length === 3) {
      container.className = 'container three-images';
    } else {
      container.className = 'container four-images';
    }

    setTimeout(() => {
      const height = document.body.scrollHeight;
      window.parent.postMessage({ iframeId, height }, '*');
    }, 100);
  });
</script>

</body>
</html>
